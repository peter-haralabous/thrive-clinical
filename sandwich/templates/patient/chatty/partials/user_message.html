{% if oob %}<div hx-swap-oob="beforeend:#chat-messages">{% endif %}
  <div class="user-message chat chat-end">
    <div class="chat-image avatar">
      <div class="w-10 rounded-full bg-primary text-primary-content flex items-center justify-center">
        <span class="text-sm">{{ patient.initials }}</span>
      </div>
    </div>
    {# user messages are plaintext; whitespace-pre-wrap preserves newlines #}
    <div class="user-message-content chat-bubble chat-bubble-primary whitespace-pre-wrap">{{ message }}</div>
    <div class="chat-footer">
      {% if timestamp %}<time class="text-xs opacity-50 py-1">{{ timestamp }}</time>{% endif %}
    </div>
  </div>
  {% if oob %}</div>{% endif %}
