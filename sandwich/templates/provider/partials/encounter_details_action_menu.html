{% load lucide %}

{# Desktop view: show all buttons inline #}
<div class="hidden md:flex gap-2 flex-wrap">
  <button class="btn btn-primary"
          hx-target="#add-task-modal"
          hx-get="{% url 'providers:patient_add_task' organization_id=organization.id patient_id=patient.id %}">
    Send Form
  </button>
  <a href="{% url "providers:patient" organization_id=organization.id patient_id=patient.id %}"
     class="btn btn-secondary">View Patient</a>
  <a href="{% url "providers:patient_edit" organization_id=organization.id patient_id=patient.id %}"
     class="btn btn-tertiary">Edit Patient Record</a>
  <form action="{% url "providers:encounter_archive" organization_id=organization.id encounter_id=encounter.id %}"
        class="inline"
        method="post">
    {% csrf_token %}
    <button type="submit"
            class="btn {% if encounter.status == "completed" %}btn-outline{% else %}btn-error{% endif %}">
      {% if encounter.status == "completed" %}
        Unarchive Encounter
      {% else %}
        Archive Encounter
      {% endif %}
    </button>
  </form>
</div>
{# Mobile view: kebab menu dropdown #}
<div class="md:hidden dropdown dropdown-end">
  <button tabindex="0"
          class="btn btn-ghost btn-sm rounded-full cursor-pointer"
          aria-label="Encounter actions menu">{% lucide "menu" class="size-6" %}</button>
  <ul tabindex="0"
      class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 mt-2">
    <li>
      <a hx-get="{% url 'providers:patient_add_task' organization_id=organization.id patient_id=patient.id %}"
         hx-target="#add-task-modal"
         class="flex items-center gap-2">{% lucide "send" class="size-4" %} Send Form</a>
    </li>
    <li>
      <a href="{% url "providers:patient" organization_id=organization.id patient_id=patient.id %}"
         class="flex items-center gap-2">{% lucide "user" class="size-4" %} View Patient</a>
    </li>
    <li>
      <a href="{% url "providers:patient_edit" organization_id=organization.id patient_id=patient.id %}"
         class="flex items-center gap-2">{% lucide "square-pen" class="size-4" %} Edit Patient Record</a>
    </li>
    <li>
      <form action="{% url "providers:encounter_archive" organization_id=organization.id encounter_id=encounter.id %}"
            method="post">
        {% csrf_token %}
        {% if encounter.status == "completed" %}
          <button type="submit" class="w-full text-left flex items-center gap-2">
            {% lucide "rotate-ccw" class="size-4" %} Unarchive Encounter
          </button>
        {% else %}
          <button type="submit"
                  class="w-full text-left text-error flex items-center gap-2">
            {% lucide "archive" class="size-4" %} Archive Encounter
          </button>
        {% endif %}
      </form>
    </li>
  </ul>
</div>
