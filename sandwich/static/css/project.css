@import 'tailwindcss';
@import './_google-button.css';
@import './choicesjs.css';

@plugin "@tailwindcss/typography";
@plugin "daisyui" {
  themes: corporate --default;
}

@theme {
  /* Custom animations */
  --animate-gelatine: gelatine 1s ease-in-out 1;
  @keyframes gelatine {
    from,
    to {
      transform: scale(1, 1);
    }
    25% {
      transform: scale(0.9, 1.1);
    }
    50% {
      transform: scale(1.1, 0.9);
    }
    75% {
      transform: scale(0.95, 1.05);
    }
  }
}

/* base.html generates alert variants at runtime */
@source inline("alert-{success,danger,warning,info}");

/* bring back some default styling */
@layer base {
  h1 {
    @apply text-2xl;
    @apply font-bold;
  }

  h2 {
    @apply text-xl;
    @apply font-semibold;
  }

  h3 {
    @apply text-lg;
    @apply font-semibold;
  }
}

/* django-jsonform styles don't really match anything in the app */
.django-jsonform-container {
  input {
    @apply input;
  }
}

/* Error pages */
@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}
.float-animation {
  animation: float 3s ease-in-out infinite;
}

@layer utility {
  /* Display contents utility for toggle-container web component */
  .contents {
    display: contents;
  }

  /* Panel resizing: widths are set directly on .panel-expanded via JS */
  .resizable-panel {
    flex: 0 0 auto !important;
  }

  /* Hide resize handles when panels are collapsed
   * When a panel's expanded view is hidden, its adjacent resize handle should also hide */
  #left-panel:has(.panel-expanded.hidden) + #left-resize-handle,
  #right-resize-handle:has(+ #right-panel .panel-expanded.hidden),
  #right-panel:has(.panel-expanded.hidden) ~ #right-resize-handle {
    display: none !important;
  }

  /* Add gap when panels are collapsed */
  #left-panel:has(.panel-expanded.hidden) {
    margin-right: 0.5rem;
  }

  #right-panel:has(.panel-expanded.hidden) {
    margin-left: 0.5rem;
  }

  /* Mobile panel visibility: Force all panels to be expanded on mobile (< 1024px)
   * Ensures panels display properly even if collapsed on desktop
   * Only applies when parent panel is visible (doesn't have hidden class) */
  @media (max-width: 1023px) {
    #left-panel:not(.hidden) toggle-container > .panel-expanded,
    #right-panel:not(.hidden) toggle-container > .panel-expanded {
      display: flex !important;
    }
    #left-panel:not(.hidden) toggle-container > div:not(.panel-expanded),
    #right-panel:not(.hidden) toggle-container > div:not(.panel-expanded) {
      display: none !important;
    }
  }

  /* Update DaisyUI prose styling to match desired typography */
  .prose {
    line-height: 1.4;

    h2 {
      margin: 1em 0;
    }

    hr {
      margin: 1em 0;
      height: 1px;
    }
  }

  hr {
    border-top: none;
    @apply divider;
  }

  /* Fix alignment on checkboxes */
  .checkbox_wrapper {
    div {
      display: grid;
      grid-template-columns: 0fr 1fr;
      grid-template-rows: 0fr 0fr;

      input {
        margin-right: 0.5em;
        grid-column: 1;
        grid-row: 1 / 2;
      }

      label {
        grid-column: 2;
        grid-row: 1;
      }

      small {
        grid-column: 2;
        grid-row: 2;
      }
    }
  }
}
