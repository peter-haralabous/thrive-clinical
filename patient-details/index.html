<!doctype html>
<html class="light" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Patient Details — Prototype</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
      rel="stylesheet"
    />
    <script type="module" src="../shared/global-header.js"></script>
    <script type="module" src="../shared/status-chip.js"></script>
    <script type="module" src="../shared/send-form-modal.js"></script>
    <script type="module" src="../shared/encounter-header.js"></script>
    <script type="module" src="../shared/timeline.js"></script>
    <link href="../shared/styles.css" rel="stylesheet" />

    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#135bec',
              'background-light': '#f6f6f8',
              'background-dark': '#101622',
              'primary-calm': '#A0C4FF',
              'accent-warm': '#BDB2FF',
              'neutral-bg': '#F8F9FA',
              'text-dark-gray': '#495057',
              'text-light-gray': '#6c757d',
              'card-light': '#ffffff',
              'card-dark': '#1a2230',
            },
            fontFamily: {
              display: ['Inter', 'sans-serif'],
            },
          },
        },
      };
    </script>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

    <script>
      // Get today's date in YYYY-MM-DD format for active encounters
      const todayFormatted = new Date().toISOString().split('T')[0];
    </script>

    <style>
      .material-symbols-outlined {
        font-variation-settings:
          'FILL' 0,
          'wght' 400,
          'GRAD' 0,
          'opsz' 24;
      }
    </style>
    <style>
      body {
        min-height: 100dvh;
        max-height: 100dvh;
        overflow: hidden;
      }

      /* Vertical tab styling */
      .vertical-tab {
        transition:
          width 0.3s ease-in-out,
          min-width 0.3s ease-in-out,
          flex 0.3s ease-in-out;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 100vh;
      }

      /* Sidebar collapsed state */
      #sidebar.collapsed {
        width: 64px;
      }

      #sidebar.collapsed .sidebar-title,
      #sidebar.collapsed .font-medium {
        display: none;
      }

      #sidebar.collapsed .sidebar-collapse-btn {
        display: none;
      }

      #sidebar.collapsed .sidebar-expand-btn {
        display: block !important;
      }

      #sidebar.collapsed button {
        justify-content: center;
      }

      #sidebar.collapsed button .flex {
        justify-content: center;
      }

      /* Adjust tabs container margin when sidebar is collapsed */
      #tabs-container {
        margin-left: 256px;
        transition: margin-left 0.3s ease-in-out;
      }

      #sidebar.collapsed ~ #tabs-container {
        margin-left: 64px;
      }

      .vertical-tab.collapsed {
        width: 48px;
        min-width: 48px;
        flex: 0 0 48px;
        background-color: white;
        padding-top: 1rem;
      }

      .vertical-tab.expanded {
        flex: 1;
        min-width: 42.5%;
      }

      /* Enable horizontal scroll on tabs container */
      #tabs-container {
        overflow-x: auto;
        overflow-y: hidden;
        height: 100vh;
      }

      /* Show collapsed button only when collapsed */
      .vertical-tab.expanded .collapsed-only {
        display: none;
      }

      .vertical-tab.collapsed .collapsed-only {
        display: flex;
        height: 100%;
        padding-top: 64px;
      }

      /* Collapsed tab hover behavior - swap icon with close button */
      .vertical-tab.collapsed .tab-icon {
        display: block;
      }

      .vertical-tab.collapsed .close-on-hover {
        display: none;
      }

      .vertical-tab.collapsed:hover .tab-icon {
        display: none;
      }

      .vertical-tab.collapsed:hover .close-on-hover {
        display: block;
      }

      /* Rotated label for collapsed state */
      .tab-label {
        writing-mode: vertical-rl;
        text-orientation: mixed;
        white-space: nowrap;
        transition: all 0.3s ease-in-out;
      }

      .tab-label.expanded {
        writing-mode: horizontal-tb;
        text-orientation: upright;
      }

      /* Smooth content transitions */
      .tab-content {
        opacity: 0;
        transition: opacity 0.2s ease-in-out;
        display: none;
        flex-direction: column;
        flex: 1;
        overflow: hidden;
        background-color: white;
      }

      .tab-content.visible {
        opacity: 1;
        display: flex;
      }
      .tab-content .sticky > div {
        background-color: white;
      }

      .tab-content .tab-overflow {
        overflow-y: auto;
      }
      /* Chevron rotation for submenus */
      .chevron-icon {
        transition: transform 0.3s ease;
      }

      .chevron-icon.rotated {
        transform: rotate(90deg);
      }

      /* Active tab styling */
      .vertical-tab.active-tab {
        border-left: 5px solid #333;
        border-right: 5px solid #333;
      }
      .vertical-tab.active-tab.expanded {
        position: relative;
      }
      .vertical-tab.active-tab.expanded .sticky {
        background: linear-gradient(to right, rgba(19, 91, 236, 0.05), white);
      }

      .vertical-tab.active-tab.collapsed {
        background-color: rgba(19, 91, 236, 0.1);
      }
    </style>
  </head>
  <body
    class="font-display bg-neutral-bg dark:bg-background-dark text-text-dark-gray dark:text-neutral-bg"
  >
    <global-header home-url="../index.html" base-path=".."></global-header>

    <main class="flex h-screen overflow-hidden pt-16">
      <!-- Side Menu -->
      <aside
        id="sidebar"
        class="w-64 bg-white dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 flex-shrink-0 fixed left-0 top-16 h-screen z-30 transition-all duration-300 flex flex-col"
      >
        <!-- Patient Header -->
        <div class="p-4 border-b border-gray-200 dark:border-gray-700 sidebar-header">
          <div class="flex items-start justify-between mb-3">
            <h2 class="text-2xl font-bold text-text-dark-gray dark:text-neutral-bg">H, Jane</h2>
            <div class="relative">
              <button
                id="patient-menu-btn"
                onclick="togglePatientMenu()"
                class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
              >
                <span
                  class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg"
                >
                  more_horiz
                </span>
              </button>

              <!-- Patient Actions Dropdown -->
              <div
                id="patient-menu-dropdown"
                class="hidden absolute top-full right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50"
              >
                <button
                  onclick="
                    handleSendForm();
                    togglePatientMenu();
                  "
                  class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors text-left text-sm text-text-dark-gray dark:text-neutral-bg"
                >
                  <span class="material-symbols-outlined text-lg">send</span>
                  <span>Send Form</span>
                </button>
                <button
                  onclick="
                    handleEditPatient();
                    togglePatientMenu();
                  "
                  class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors text-left text-sm text-text-dark-gray dark:text-neutral-bg"
                >
                  <span class="material-symbols-outlined text-lg">edit</span>
                  <span>Edit patient</span>
                </button>
                <button
                  onclick="
                    handleRemovePatient();
                    togglePatientMenu();
                  "
                  class="w-full flex items-center gap-3 px-4 py-2.5 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-left text-sm text-red-600 dark:text-red-400 border-t border-gray-200 dark:border-gray-700"
                >
                  <span class="material-symbols-outlined text-lg">person_remove</span>
                  <span>Remove patient</span>
                </button>
              </div>
            </div>
          </div>
          <div class="space-y-2 text-base">
            <div class="flex items-center gap-2 text-text-light-gray">
              <span class="material-symbols-outlined text-lg">calendar_today</span>
              <span>DOB: 2000-01-01</span>
            </div>
            <div class="flex items-center gap-2 text-text-light-gray">
              <span class="material-symbols-outlined text-lg">badge</span>
              <span>PHN: 12349000</span>
            </div>
            <div class="flex items-start gap-2 text-text-light-gray">
              <span class="material-symbols-outlined text-lg">mail</span>
              <span class="break-all">example@email.com</span>
            </div>
          </div>

          <!-- Add Button with Dropdown -->
          <div class="pt-4">
            <div class="relative">
              <button
                onclick="toggleAddDropdown()"
                class="w-full flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors shadow-sm"
              >
                <span class="material-symbols-outlined text-lg">add</span>
                <span class="text-sm">Add</span>
                <span class="material-symbols-outlined text-lg">expand_more</span>
              </button>

              <!-- Dropdown Menu -->
              <div
                id="add-dropdown"
                class="hidden absolute top-full left-0 right-0 mt-2 bg-white dark:bg-gray-800 rounded-lg shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden z-50"
              >
                <button
                  onclick="
                    handleAddEncounter();
                    toggleAddDropdown();
                  "
                  class="w-full flex items-start gap-3 px-4 py-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors text-left"
                >
                  <div
                    class="flex-shrink-0 w-12 h-12 bg-green-100 dark:bg-green-900/30 rounded-lg flex items-center justify-center"
                  >
                    <span class="material-symbols-outlined text-green-600 dark:text-green-400">
                      calendar_month
                    </span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="text-sm font-semibold text-text-dark-gray dark:text-white">
                      New Encounter
                    </div>
                    <div class="text-xs text-text-light-gray">Create a new patient encounter</div>
                  </div>
                </button>

                <button
                  onclick="
                    handleAddHealthRecord();
                    toggleAddDropdown();
                  "
                  class="w-full flex items-start gap-3 px-4 py-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors text-left"
                >
                  <div
                    class="flex-shrink-0 w-12 h-12 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center"
                  >
                    <span class="material-symbols-outlined text-purple-600 dark:text-purple-400">
                      clinical_notes
                    </span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="text-sm font-semibold text-text-dark-gray dark:text-white">
                      Health Record
                    </div>
                    <div class="text-xs text-text-light-gray">
                      Medication, condition, or lab result
                    </div>
                  </div>
                </button>

                <button
                  onclick="
                    handleAddNote();
                    toggleAddDropdown();
                  "
                  class="w-full flex items-start gap-3 px-4 py-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors text-left"
                >
                  <div
                    class="flex-shrink-0 w-12 h-12 bg-amber-100 dark:bg-amber-900/30 rounded-lg flex items-center justify-center"
                  >
                    <span class="material-symbols-outlined text-amber-600 dark:text-amber-400">
                      chat_bubble
                    </span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="text-sm font-semibold text-text-dark-gray dark:text-white">
                      Note
                    </div>
                    <div class="text-xs text-text-light-gray">Personal note or observation</div>
                  </div>
                </button>

                <button
                  onclick="
                    handleAddDocument();
                    toggleAddDropdown();
                  "
                  class="w-full flex items-start gap-3 px-4 py-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors text-left"
                >
                  <div
                    class="flex-shrink-0 w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center"
                  >
                    <span class="material-symbols-outlined text-blue-600 dark:text-blue-400">
                      upload_file
                    </span>
                  </div>
                  <div class="flex-1 min-w-0">
                    <div class="text-sm font-semibold text-text-dark-gray dark:text-white">
                      Document
                    </div>
                    <div class="text-xs text-text-light-gray">Upload file, image, or PDF</div>
                  </div>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="flex-1 overflow-y-auto">
          <div class="p-4">
            <!-- Root Menu -->
            <nav id="root-menu">
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('overview')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">grid_view</span>
                      <span class="font-medium sidebar-title">Overview</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('timeline')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">timeline</span>
                      <span class="font-medium sidebar-title">Timeline</span>
                    </div>
                  </button>
                </li>
              </ul>
              <div
                class="mt-6 mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Directories
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="showDirectory('health-records')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">medical_information</span>
                        <span class="font-medium sidebar-title">Health Records</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('encounters')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">calendar_month</span>
                        <span class="font-medium sidebar-title">Encounters</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('forms')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">description</span>
                        <span class="font-medium sidebar-title">Forms</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('summaries')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">summarize</span>
                        <span class="font-medium sidebar-title">Summaries</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('documents')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">folder</span>
                        <span class="font-medium sidebar-title">Documents</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Health Records Directory -->
            <nav id="health-records-directory" class="hidden">
              <button
                onclick="showRootMenu()"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Health Records
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="showDirectory('conditions')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">health_and_safety</span>
                        <span class="sidebar-title">Conditions</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('practitioners')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">stethoscope</span>
                        <span class="sidebar-title">Practitioners</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('immunizations')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">vaccines</span>
                        <span class="sidebar-title">Immunizations</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('medications')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">medication</span>
                        <span class="sidebar-title">Medications</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="showDirectory('allergies')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">emergency</span>
                        <span class="sidebar-title">Allergies</span>
                      </div>
                      <span class="material-symbols-outlined text-xl sidebar-title">
                        chevron_right
                      </span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Conditions Directory -->
            <nav id="conditions-directory" class="hidden">
              <button
                onclick="showDirectory('health-records')"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Conditions
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('condition-hypertension')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between gap-3">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">health_and_safety</span>
                        <span class="sidebar-title">Hypertension</span>
                      </div>
                      <span
                        class="material-symbols-outlined text-sm text-text-light-gray"
                        title="Added by doctor"
                      >
                        stethoscope
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-low-back-pain')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">health_and_safety</span>
                      <span class="sidebar-title">Low back pain</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-fibrocystic')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">health_and_safety</span>
                      <span class="sidebar-title">Fibrocystic breast disease</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-dizziness')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between gap-3">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">health_and_safety</span>
                        <span class="sidebar-title">Dizziness</span>
                      </div>
                      <span
                        class="material-symbols-outlined text-sm text-text-light-gray"
                        title="Added by doctor"
                      >
                        stethoscope
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-htn')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">health_and_safety</span>
                      <span class="sidebar-title">HTN</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-renal')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between gap-3">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">health_and_safety</span>
                        <span class="sidebar-title">Chronic Renal Insufficiency</span>
                      </div>
                      <span
                        class="material-symbols-outlined text-sm text-text-light-gray"
                        title="Added by doctor"
                      >
                        stethoscope
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-knee')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">health_and_safety</span>
                      <span class="sidebar-title">Knee pain (right)</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('condition-memory')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">health_and_safety</span>
                      <span class="sidebar-title">Memory issues</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Practitioners Directory -->
            <nav id="practitioners-directory" class="hidden">
              <button
                onclick="showDirectory('health-records')"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Practitioners
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('practitioner-carter')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">stethoscope</span>
                      <span class="sidebar-title">Dr. Emily Carter</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('practitioner-chen')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">stethoscope</span>
                      <span class="sidebar-title">Dr. Michael Chen</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('practitioner-patel')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">stethoscope</span>
                      <span class="sidebar-title">Dr. Sarah Patel</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Immunizations Directory -->
            <nav id="immunizations-directory" class="hidden">
              <button
                onclick="showDirectory('health-records')"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Immunizations
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('immunization-covid')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">vaccines</span>
                      <span class="sidebar-title">COVID-19 Vaccine (Moderna)</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('immunization-flu')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">vaccines</span>
                      <span class="sidebar-title">Influenza Vaccine</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Medications Directory -->
            <nav id="medications-directory" class="hidden">
              <button
                onclick="showDirectory('health-records')"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Medications
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('medication-warfarin')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center justify-between gap-3">
                      <div class="flex items-center gap-3">
                        <span class="material-symbols-outlined text-xl">medication</span>
                        <span class="sidebar-title">Warfarin 5mg</span>
                      </div>
                      <span
                        class="material-symbols-outlined text-sm text-text-light-gray"
                        title="Added by doctor"
                      >
                        stethoscope
                      </span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('medication-metformin')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">medication</span>
                      <span class="sidebar-title">Metformin 500mg</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('medication-lisinopril')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">medication</span>
                      <span class="sidebar-title">Lisinopril 10mg</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('medication-atorvastatin')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">medication</span>
                      <span class="sidebar-title">Atorvastatin 20mg</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Allergies Directory -->
            <nav id="allergies-directory" class="hidden">
              <button
                onclick="showDirectory('health-records')"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Allergies
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('allergy-penicillin')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">emergency</span>
                      <span class="sidebar-title">Penicillin</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('allergy-latex')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">emergency</span>
                      <span class="sidebar-title">Latex</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Labs - 2025-12-01 Directory -->
            <nav id="lab-results-directory" class="hidden">
              <button
                onclick="showDirectory('health-records')"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Labs - 2025-12-01
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('lab-metabolic-panel')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">science</span>
                      <span class="sidebar-title">Metabolic Panel - Oct 15, 2024</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Encounters Directory -->
            <nav id="encounters-directory" class="hidden">
              <button
                onclick="showRootMenu()"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Encounters
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('encounter-1')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">calendar_month</span>
                      <span class="sidebar-title" id="sidebar-encounter-1-title">Encounter ·</span>
                      <script>
                        document.getElementById('sidebar-encounter-1-title').textContent =
                          'Encounter · ' + todayFormatted;
                      </script>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('encounter-2')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">calendar_month</span>
                      <span class="sidebar-title">Encounter · 2025-11-14</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Forms Directory -->
            <nav id="forms-directory" class="hidden">
              <button
                onclick="showRootMenu()"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Forms
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('intake-form')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">description</span>
                      <span class="sidebar-title">Intake Form</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('follow-up-form')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">description</span>
                      <span class="sidebar-title">Follow-up Form</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Summaries Directory -->
            <nav id="summaries-directory" class="hidden">
              <button
                onclick="showRootMenu()"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Summaries
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('summary-intake')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">summarize</span>
                      <span class="sidebar-title">Summary: Patient Intake Form</span>
                    </div>
                  </button>
                </li>
                <li>
                  <button
                    onclick="toggleTab('summary-visit')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <span class="material-symbols-outlined text-xl">summarize</span>
                      <span class="sidebar-title">Summary: Follow up form</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
            <!-- Documents Directory -->
            <nav id="documents-directory" class="hidden">
              <button
                onclick="showRootMenu()"
                class="w-full text-left px-4 py-3 mb-4 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
              >
                <div class="flex items-center gap-3">
                  <span class="material-symbols-outlined text-xl">arrow_back</span>
                  <span class="font-medium sidebar-title">Back</span>
                </div>
              </button>
              <div
                class="mb-2 px-4 text-xs font-semibold text-text-light-gray uppercase tracking-wider sidebar-title"
              >
                Documents
              </div>
              <ul class="space-y-1">
                <li>
                  <button
                    onclick="toggleTab('document-lab')"
                    class="w-full text-left px-4 py-3 rounded-lg hover:bg-neutral-bg dark:hover:bg-background-dark text-text-dark-gray dark:text-neutral-bg transition-colors"
                  >
                    <div class="flex items-center gap-3">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="flex-shrink-0"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
                        <circle cx="9" cy="9" r="2" />
                        <path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21" />
                      </svg>
                      <span class="sidebar-title">Labs - 2025-12-01</span>
                    </div>
                  </button>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </aside>
      <!-- Vertical Tabs Container -->
      <div id="tabs-container" class="flex flex-1 pt-16">
        <!-- Overview Tab -->
        <div
          id="tab-overview"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('overview')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              home
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('overview');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Overview
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-20 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Overview
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('overview')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('overview')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span class="material-symbols-outlined text-primary">person</span>
                  <span class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Patient information
                  </span>
                </div>
                <div class="space-y-3">
                  <h2 class="text-2xl font-bold text-text-dark-gray dark:text-white">Jane H</h2>
                  <div class="space-y-2 text-base">
                    <div class="flex gap-2">
                      <span class="text-text-light-gray">DOB:</span>
                      <span class="text-text-dark-gray dark:text-white">Jul 3, 1956 (68 yrs)</span>
                    </div>
                    <div class="flex gap-2">
                      <span class="text-text-light-gray">Province:</span>
                      <span class="text-text-dark-gray dark:text-white">Ontario, Canada</span>
                    </div>
                    <div class="flex gap-2">
                      <span class="text-text-light-gray">Email:</span>
                      <span class="text-text-dark-gray dark:text-white break-all">
                        john.smith@email.com
                      </span>
                    </div>
                  </div>
                </div>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Active Problems
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-hypertension');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Hypertension
                      </a>
                      <span
                        class="px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-800 rounded ml-2"
                      >
                        Chronic
                      </span>
                      <p class="text-text-light-gray mt-1">
                        Onset: Jun 2001 • Managed with lifestyle modifications
                      </p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-low-back-pain');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Low back pain
                      </a>
                      <span
                        class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded ml-2"
                      >
                        Active
                      </span>
                      <p class="text-text-light-gray mt-1">Taking Ibuprofen PRN</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-fibrocystic');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Fibrocystic breast disease
                      </a>
                      <span
                        class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded ml-2"
                      >
                        Active
                      </span>
                      <p class="text-text-light-gray mt-1">Routine monitoring</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-dizziness');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Dizziness
                      </a>
                      <span class="text-text-light-gray ml-2">- Onset: 2024-03-10</span>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-htn');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        HTN
                      </a>
                      <span class="text-text-light-gray ml-2">- Onset: 2018-12</span>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-renal');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Chronic Renal Insufficiency
                      </a>
                      <span class="text-text-light-gray ml-2">- Onset: 2020-05</span>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-knee');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Knee pain (right)
                      </a>
                      <span class="text-text-light-gray ml-2">- Onset: 2023-08</span>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('condition-memory');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Memory issues
                      </a>
                      <span class="text-text-light-gray ml-2">- Early 2024</span>
                    </div>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Current Medications
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('medication-warfarin');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Warfarin 5mg
                      </a>
                      <span
                        class="px-2 py-0.5 text-xs font-bold bg-red-100 text-red-800 rounded ml-2"
                      >
                        HIGH-RISK
                      </span>
                      <p class="text-text-light-gray mt-1">
                        once daily (Anticoagulant) • Dr. Williams, Cardiology
                      </p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">
                        Metformin 500mg
                      </span>
                      <p class="text-text-light-gray mt-1">twice daily • Dr. Johnson</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">
                        Lisinopril 10mg
                      </span>
                      <p class="text-text-light-gray mt-1">once daily • Dr. Johnson</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">
                        Atorvastatin 20mg
                      </span>
                      <p class="text-text-light-gray mt-1">
                        once daily at bedtime • Dr. Johnson • Started Nov 2024
                      </p>
                    </div>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <div class="flex items-center gap-2 mb-3">
                  <span class="material-symbols-outlined text-red-500">warning</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Allergies
                  </h3>
                </div>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">
                        Penicillin
                      </span>
                      <p class="text-text-light-gray mt-1">Reaction: Rash • Severity: Moderate</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">Latex</span>
                      <p class="text-text-light-gray mt-1">
                        Reaction: Contact dermatitis • Severity: Mild
                      </p>
                    </div>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Recent Immunizations
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">
                        COVID-19 Vaccine (Moderna)
                      </span>
                      <p class="text-text-light-gray mt-1">Sep 22, 2024 • 2024-2025 booster</p>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <span class="font-medium text-text-dark-gray dark:text-white">
                        Influenza Vaccine
                      </span>
                      <p class="text-text-light-gray mt-1">Oct 5, 2024 • Seasonal flu shot</p>
                    </div>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Care Team
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <a
                      href="#"
                      onclick="
                        toggleTab('practitioner-carter');
                        return false;
                      "
                      class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                    >
                      Dr. Emily Carter
                    </a>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <a
                      href="#"
                      onclick="
                        toggleTab('practitioner-chen');
                        return false;
                      "
                      class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                    >
                      Dr. Michael Chen
                    </a>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <a
                      href="#"
                      onclick="
                        toggleTab('practitioner-patel');
                        return false;
                      "
                      class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                    >
                      Dr. Sarah Patel
                    </a>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Recent Encounters
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('encounter-1');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Follow-up Visit
                      </a>
                      <span class="text-text-light-gray ml-2">
                        -
                        <script>
                          document.write(todayFormatted);
                        </script>
                      </span>
                    </div>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <div class="flex-1">
                      <a
                        href="#"
                        onclick="
                          toggleTab('encounter-2');
                          return false;
                        "
                        class="font-medium text-blue-600 hover:text-blue-800 dark:text-blue-400 hover:underline"
                      >
                        Lab Review
                      </a>
                      <span class="text-text-light-gray ml-2">- 2025-11-14</span>
                    </div>
                  </li>
                </ul>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Past Medical History
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Uterine fibroids (resolved 1994) • Peptic ulcer disease (resolved 1990)
                </p>
              </div>

              <div
                class="p-4 bg-white dark:bg-card-dark rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Recent activity
                </h3>
                <div class="space-y-2">
                  <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                    <div class="flex justify-between items-start">
                      <div class="flex-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Follow-up form completed
                        </p>
                        <p class="text-xs text-text-light-gray mt-1">
                          Patient reported improvement in symptoms
                        </p>
                      </div>
                      <span class="text-xs text-text-light-gray ml-3">2 hours ago</span>
                    </div>
                  </div>
                  <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                    <div class="flex justify-between items-start">
                      <div class="flex-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Appointment scheduled
                        </p>
                        <p class="text-xs text-text-light-gray mt-1">
                          Next visit: December 15, 2025 at 2:00 PM
                        </p>
                      </div>
                      <span class="text-xs text-text-light-gray ml-3">1 day ago</span>
                    </div>
                  </div>
                  <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                    <div class="flex justify-between items-start">
                      <div class="flex-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Lab results uploaded
                        </p>
                        <p class="text-xs text-text-light-gray mt-1">
                          Blood panel results are available
                        </p>
                      </div>
                      <span class="text-xs text-text-light-gray ml-3">3 days ago</span>
                    </div>
                  </div>
                  <div class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg">
                    <div class="flex justify-between items-start">
                      <div class="flex-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Prescription renewed
                        </p>
                        <p class="text-xs text-text-light-gray mt-1">
                          Metformin 500mg - 90 day supply
                        </p>
                      </div>
                      <span class="text-xs text-text-light-gray ml-3">1 week ago</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Timeline Tab -->
        <div
          id="tab-timeline"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('timeline')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              timeline
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('timeline');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Timeline
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-20 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Timeline
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('timeline')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('timeline')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-0 flex flex-col h-full pt-20 sm:pt-22 md:pt-24">
              <h2
                class="text-2xl font-bold text-text-dark-gray dark:text-white px-4 sm:px-6 md:px-8 space-y-4"
              >
                Timeline
              </h2>
              <patient-timeline style="height: 100%"></patient-timeline>
            </div>
          </div>
        </div>
        <!-- Intake Form Tab -->
        <div
          id="tab-intake-form"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('intake-form')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              description
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('intake-form');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Intake form
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Intake form
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('intake-form')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('intake-form')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 space-y-6">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                  <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded">
                    Completed
                  </span>
                </div>
                <button
                  class="px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-2"
                >
                  <span class="material-symbols-outlined text-lg">edit</span>
                  Edit
                </button>
              </div>
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                  <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded">
                    Completed
                  </span>
                </div>
                <button
                  class="px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-2"
                >
                  <span class="material-symbols-outlined text-lg">edit</span>
                  Edit
                </button>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Patient Information
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Full name
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">Jane H</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Date of birth
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">July 3, 1956</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Email address
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      john.smith@email.com
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Phone number
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">(555) 123-4567</p>
                  </div>
                </div>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Medical History
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Primary concern
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      Experiencing persistent lower back pain for the past 3 weeks. Pain is worse
                      when sitting for long periods and improves with movement. Rating 6/10 on pain
                      scale.
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Current medications
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      Lisinopril 10mg daily, Metformin 500mg twice daily, Aspirin 81mg daily
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Known allergies
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      Penicillin (rash), Latex (contact dermatitis)
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Past surgeries or hospitalizations
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      Appendectomy (2015), Cholecystectomy (2019)
                    </p>
                  </div>
                </div>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Lifestyle
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Do you smoke?
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">Never</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Exercise frequency
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      Rarely (less than once per week)
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Alcohol consumption
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">1-2 drinks per week</p>
                  </div>
                </div>
              </div>

              <div
                class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <p class="text-xs text-text-light-gray">
                  Submitted on November 21, 2025 at 2:30 PM
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Follow Up Form Tab -->
        <div
          id="tab-follow-up-form"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('follow-up-form')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              assignment
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('follow-up-form');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Follow up form
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Follow up form
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('follow-up-form')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('follow-up-form')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 space-y-6">
              <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-3">
                  <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded">
                    Completed
                  </span>
                </div>
                <button
                  class="px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-2"
                >
                  <span class="material-symbols-outlined text-lg">edit</span>
                  Edit
                </button>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Patient Information
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Full name
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">Jane H</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Date of birth
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">July 3, 1956</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Email address
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      john.smith@email.com
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Phone number
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">(555) 123-4567</p>
                  </div>
                </div>
              </div>

              <div
                class="p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg"
              >
                <p class="text-base text-text-dark-gray dark:text-white">
                  <span class="font-semibold">Last visit:</span>
                  November 14, 2025
                </p>
                <p class="text-base text-text-dark-gray dark:text-white mt-1">
                  <span class="font-semibold">Provider:</span>
                  Dr. Smith
                </p>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  General Well-being
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      How are you feeling since your last visit?
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      Feeling much better overall. The lower back pain has decreased significantly.
                      I've been following the physical therapy exercises and they seem to be
                      helping.
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Overall health rating
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">Good</p>
                  </div>
                </div>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Symptoms
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Any new symptoms?
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      No new symptoms to report.
                    </p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Have your previous symptoms improved?
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">Yes, significantly</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Pain level (0-10)
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">
                      2/10 (improved from 6/10)
                    </p>
                  </div>
                </div>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Treatment Compliance
                </h3>
                <div class="space-y-4">
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Are you following the treatment plan?
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">Yes, completely</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Any medication side effects?
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">None reported</p>
                  </div>
                  <div>
                    <label class="block text-xs font-medium text-text-light-gray mb-1">
                      Physical therapy sessions completed
                    </label>
                    <p class="text-base text-text-dark-gray dark:text-white">6 out of 8 sessions</p>
                  </div>
                </div>
              </div>

              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-4">
                  Additional Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Planning to continue with physical therapy. Would like to discuss long-term
                  prevention strategies during next appointment.
                </p>
              </div>

              <div
                class="p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <p class="text-xs text-text-light-gray">
                  Submitted on November 28, 2025 at 10:15 AM
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Summary: Patient Intake Form Tab -->
        <div
          id="tab-summary-intake"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('summary-intake')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              summarize
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('summary-intake');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Intake Summary
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Summary: Patient Intake Form
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('summary-intake')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('summary-intake')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-6 pt-20 space-y-6">
              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <div class="flex items-center justify-between gap-4 mb-4 flex-wrap">
                  <h2 class="text-xl font-bold text-text-dark-gray dark:text-white">
                    Summary: Patient Intake Form
                  </h2>
                  <div class="flex items-center gap-2 flex-wrap">
                    <button
                      class="px-3 py-1.5 text-base font-medium text-text-dark-gray dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5"
                    >
                      <span class="material-symbols-outlined text-lg">content_copy</span>
                      Copy
                    </button>
                    <button
                      class="px-3 py-1.5 text-base font-medium text-text-dark-gray dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5"
                    >
                      <span class="material-symbols-outlined text-lg">print</span>
                      Print
                    </button>
                    <button
                      class="px-3 py-1.5 text-base font-medium text-text-dark-gray dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5"
                    >
                      <span class="material-symbols-outlined text-lg">refresh</span>
                      Regenerate
                    </button>
                  </div>
                </div>
                <div class="space-y-6 text-base text-text-dark-gray dark:text-white">
                  <div>
                    <h3 class="font-semibold text-base mb-2">Reason for Visit</h3>
                    <p>
                      Jane is here for a consultation regarding recent health concerns and to
                      establish care.
                    </p>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Current Symptoms</h3>
                    <p class="mb-2">Jane reports experiencing the following symptoms:</p>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        <strong>Dizziness:</strong>
                        Occasional episodes, particularly when standing up quickly. Started
                        approximately 2 months ago.
                      </li>
                      <li>
                        <strong>Low back pain:</strong>
                        Persistent discomfort in the lower back region, present for about 3 weeks.
                        Pain is worse with prolonged sitting.
                      </li>
                    </ul>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Medications</h3>
                    <p class="mb-2">Current medications include:</p>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        <strong>Lisinopril</strong>
                        - 10 mg, taken orally once daily for blood pressure management
                      </li>
                      <li>
                        <strong>Atorvastatin</strong>
                        - 20 mg, taken orally once daily for cholesterol control
                      </li>
                      <li>
                        <strong>Warfarin</strong>
                        - 5 mg, taken orally once daily for anticoagulation
                      </li>
                    </ul>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Allergies</h3>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        <strong>Penicillin:</strong>
                        Causes skin rash (moderate severity)
                      </li>
                      <li>
                        <strong>Latex:</strong>
                        Causes contact dermatitis (mild severity)
                      </li>
                    </ul>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Past Medical History</h3>
                    <p class="mb-2">Jane has a history of:</p>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        <strong>Hypertension:</strong>
                        Diagnosed June 2001, currently managed with medication
                      </li>
                      <li>
                        <strong>Deep vein thrombosis (DVT):</strong>
                        Past episode requiring anticoagulation therapy
                      </li>
                    </ul>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Substance Use</h3>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        <strong>Smoking:</strong>
                        Never smoker
                      </li>
                      <li>
                        <strong>Alcohol:</strong>
                        Occasional use (1-2 drinks per week)
                      </li>
                      <li>
                        <strong>Recreational drugs:</strong>
                        No use reported
                      </li>
                    </ul>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Immunizations</h3>
                    <ul class="list-disc list-inside space-y-1">
                      <li>
                        <strong>COVID-19 vaccine:</strong>
                        Completed primary series, last dose December 2024
                      </li>
                      <li>
                        <strong>Influenza vaccine:</strong>
                        Annual, last received October 2024
                      </li>
                      <li>
                        <strong>Tetanus booster:</strong>
                        Up to date, last administered 2019
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Summary: Follow up form Tab -->
        <div
          id="tab-summary-visit"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('summary-visit')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              summarize
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('summary-visit');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Follow up
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Summary: Follow up form
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('summary-visit')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('summary-visit')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-6 pt-20 space-y-6">
              <div
                class="p-6 bg-white dark:bg-card-dark rounded-lg border border-gray-300 dark:border-gray-700"
              >
                <div class="flex items-center justify-between gap-4 mb-4 flex-wrap">
                  <h2 class="text-xl font-bold text-text-dark-gray dark:text-white">
                    Summary: Follow up form
                  </h2>
                  <div class="flex items-center gap-2 flex-wrap">
                    <button
                      class="px-3 py-1.5 text-base font-medium text-text-dark-gray dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5"
                    >
                      <span class="material-symbols-outlined text-lg">content_copy</span>
                      Copy
                    </button>
                    <button
                      class="px-3 py-1.5 text-base font-medium text-text-dark-gray dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5"
                    >
                      <span class="material-symbols-outlined text-lg">print</span>
                      Print
                    </button>
                    <button
                      class="px-3 py-1.5 text-base font-medium text-text-dark-gray dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors flex items-center gap-1.5"
                    >
                      <span class="material-symbols-outlined text-lg">refresh</span>
                      Regenerate
                    </button>
                  </div>
                </div>
                <div class="space-y-6 text-base text-text-dark-gray dark:text-white">
                  <div>
                    <h3 class="font-semibold text-base mb-2">Follow-up Assessment</h3>
                    <p>
                      Patient returns for 2-week follow-up. Reports significant improvement in lower
                      back pain, now rating 2/10. Physical therapy exercises have been helpful.
                    </p>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Treatment Progress</h3>
                    <ul class="list-disc list-inside space-y-1">
                      <li>Completed 6 physical therapy sessions</li>
                      <li>Improved range of motion</li>
                      <li>Reduced inflammation noted on examination</li>
                      <li>Patient demonstrates proper lifting techniques</li>
                    </ul>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Recommendations</h3>
                    <p>
                      Continue physical therapy for 4 more weeks. Patient advised to maintain daily
                      stretching routine and avoid prolonged sitting. Consider ergonomic assessment
                      of workstation.
                    </p>
                  </div>
                  <div>
                    <h3 class="font-semibold text-base mb-2">Next Steps</h3>
                    <p>
                      Schedule follow-up in 4 weeks. Patient to monitor pain levels and report any
                      increase in symptoms. Continue current medication regimen.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Condition: Hypertension Tab -->
        <div
          id="tab-condition-hypertension"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-hypertension')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-hypertension');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Hypertension
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Hypertension
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-hypertension')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-hypertension')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Status:</span>
                    <span
                      class="px-2 py-0.5 text-xs font-medium bg-yellow-100 text-yellow-800 rounded"
                    >
                      Chronic
                    </span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Onset:</span>
                    <span class="text-text-dark-gray dark:text-white">June 2001</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span
                      class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded flex items-center gap-1"
                    >
                      <span class="material-symbols-outlined text-xs">stethoscope</span>
                      Dr. Smith
                    </span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Managed with lifestyle modifications including diet and exercise.
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Condition: Low Back Pain Tab -->
        <div
          id="tab-condition-low-back-pain"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-low-back-pain')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-low-back-pain');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Low back pain
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Low back pain
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-low-back-pain')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-low-back-pain')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Status:</span>
                    <span class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded">
                      Active
                    </span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span class="px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 rounded">
                      Patient
                    </span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Treatment
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Taking Ibuprofen PRN (as needed)
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Medication: Warfarin Tab -->
        <div
          id="tab-medication-warfarin"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('medication-warfarin')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              medication
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('medication-warfarin');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Warfarin 5mg
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Warfarin 5mg
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('medication-warfarin')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('medication-warfarin')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div
                class="p-4 bg-red-50 dark:bg-background-dark rounded-lg border-l-4 border-red-500"
              >
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-red-500">warning</span>
                  <span class="px-2 py-0.5 text-xs font-bold bg-red-100 text-red-800 rounded">
                    HIGH-RISK
                  </span>
                </div>
                <p class="text-lg font-semibold text-text-dark-gray dark:text-white">
                  This is a high-risk medication that requires careful monitoring.
                </p>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Medication details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Dosage:</span>
                    <span class="text-text-dark-gray dark:text-white">5mg once daily</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Type:</span>
                    <span class="text-text-dark-gray dark:text-white">Anticoagulant</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Prescriber:</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Dr. Williams, Cardiology
                    </span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span
                      class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded flex items-center gap-1"
                    >
                      <span class="material-symbols-outlined text-xs">stethoscope</span>
                      Dr. Dean Lee
                    </span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Encounter 1 Tab -->
        <div
          id="tab-encounter-1"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('encounter-1')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              event
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('encounter-1');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Encounter 11/21
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Encounter ·
                    <script>
                      document.write(todayFormatted);
                    </script>
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('encounter-1')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('encounter-1')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <!-- Encounter Header -->
              <encounter-header id="encounter-header-1" patient-name="H, Jane"></encounter-header>
              <script>
                document.getElementById('encounter-header-1').setAttribute('date', todayFormatted);
                // Update all remaining hardcoded dates within encounter-1
                const encounter1Tab = document.getElementById('tab-encounter-1');
                if (encounter1Tab) {
                  const walker = document.createTreeWalker(
                    encounter1Tab,
                    NodeFilter.SHOW_TEXT,
                    null
                  );
                  let node;
                  while ((node = walker.nextNode())) {
                    if (node.nodeValue && node.nodeValue.includes('2025-11-21')) {
                      node.nodeValue = node.nodeValue.replace(/2025-11-21/g, todayFormatted);
                    }
                  }
                }
              </script>

              <!-- Encounter Details -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Encounter Details
                  </h3>
                  <status-chip variant="active" value="Active" editable="true"></status-chip>
                </div>
                <div class="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Created</span>
                    <span class="text-text-dark-gray dark:text-white font-medium">
                      <script>
                        document.write(todayFormatted);
                      </script>
                      12:11
                    </span>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Updated</span>
                    <span class="text-text-dark-gray dark:text-white font-medium">
                      <script>
                        document.write(todayFormatted);
                      </script>
                      12:11
                    </span>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Intake</span>
                    <status-chip variant="empty" value="--" editable="true"></status-chip>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Ready for review</span>
                    <status-chip variant="neutral" value="Not ready" editable="true"></status-chip>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Appointment Date</span>
                    <span class="text-text-dark-gray dark:text-white font-medium">2025-12-15</span>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Appointment Type</span>
                    <status-chip variant="neutral" value="Consult" editable="true"></status-chip>
                  </div>

                  <!-- <div>
                    <span class="text-gray-600 block mb-2 font-semibold">View</span>
                    <status-chip variant="split-view" value="Split"></status-chip>
                  </div> -->
                </div>
              </div>

              <!-- Summaries -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Summaries
                </h3>
                <div
                  class="border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-card-dark"
                >
                  <table class="w-full text-sm">
                    <thead class="bg-gray-100 dark:bg-gray-800">
                      <tr>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Summary Name
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Type
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Created
                        </th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                      <tr
                        class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
                        onclick="toggleTab('summary-intake')"
                      >
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-purple-600 text-lg">
                              summarize
                            </span>
                            <span class="text-blue-600 hover:underline font-medium">
                              Summary: Patient Intake Form
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3 text-text-dark-gray dark:text-white">Form Summary</td>
                        <td class="px-4 py-3 text-text-light-gray">
                          <script>
                            document.write(todayFormatted);
                          </script>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Forms -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Forms
                </h3>
                <div
                  class="border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-card-dark"
                >
                  <table class="w-full text-sm">
                    <thead class="bg-gray-100 dark:bg-gray-800">
                      <tr>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Form Name
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Status
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Created
                        </th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                      <tr
                        class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
                        onclick="toggleTab('intake-form')"
                      >
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-blue-600 text-lg">
                              description
                            </span>
                            <span class="text-blue-600 hover:underline font-medium">
                              Form "Intake Form"
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3">
                          <span
                            class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded"
                          >
                            Completed
                          </span>
                        </td>
                        <td class="px-4 py-3 text-text-light-gray">
                          <script>
                            document.write(todayFormatted);
                          </script>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Notes -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">Notes</h3>
                  <button
                    class="px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-1"
                  >
                    <span class="material-symbols-outlined text-lg">add</span>
                    Add Note
                  </button>
                </div>
                <div class="space-y-3">
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-sm"
                      >
                        person
                      </span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Dr. Smith
                        </p>
                        <span
                          class="px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-800 rounded"
                        >
                          Private
                        </span>
                      </div>
                      <p class="text-base text-text-dark-gray dark:text-white mb-2">
                        Patient reports improvement in symptoms. Continue current treatment plan.
                        Follow-up recommended in 2 weeks.
                      </p>
                      <p class="text-xs text-text-light-gray">2025-11-21 15:45</p>
                    </div>
                  </div>
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-purple-600 dark:text-purple-400 text-sm"
                      >
                        patient_list
                      </span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Maria Johnson (Patient)
                        </p>
                        <span
                          class="px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded"
                        >
                          Public
                        </span>
                      </div>
                      <p class="text-base text-text-dark-gray dark:text-white mb-2">
                        I forgot to mention during my visit that I've also been experiencing
                        occasional headaches in the morning. They usually go away after breakfast.
                      </p>
                      <p class="text-xs text-text-light-gray">2025-11-21 14:30</p>
                    </div>
                  </div>
                  <div class="flex gap-3">
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-sm"
                      >
                        person
                      </span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Dr. Smith
                        </p>
                        <span
                          class="px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded"
                        >
                          Public
                        </span>
                      </div>
                      <p class="text-base text-text-dark-gray dark:text-white mb-2">
                        Appointment scheduled for comprehensive exam. Please arrive 15 minutes early
                        to complete intake paperwork.
                      </p>
                      <p class="text-xs text-text-light-gray">2025-11-21 09:20</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Activity -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Activity
                </h3>
                <div class="space-y-3">
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-sm"
                      >
                        check_circle
                      </span>
                    </div>
                    <div class="flex-1">
                      <p class="text-base font-medium text-text-dark-gray dark:text-white">
                        Form completed
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">
                        Intake Form submitted by patient
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">
                        <script>
                          document.write(todayFormatted);
                        </script>
                        14:30
                      </p>
                    </div>
                  </div>
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-purple-600 dark:text-purple-400 text-sm"
                      >
                        send
                      </span>
                    </div>
                    <div class="flex-1">
                      <p class="text-base font-medium text-text-dark-gray dark:text-white">
                        Form sent
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">
                        Intake Form sent to patient by Dr. Smith
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">
                        <script>
                          document.write(todayFormatted);
                        </script>
                        09:15
                      </p>
                    </div>
                  </div>
                  <div class="flex gap-3">
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-green-600 dark:text-green-400 text-sm"
                      >
                        add_circle
                      </span>
                    </div>
                    <div class="flex-1">
                      <p class="text-base font-medium text-text-dark-gray dark:text-white">
                        Encounter created
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">Created by Dr. Smith</p>
                      <p class="text-xs text-text-light-gray mt-1">
                        <script>
                          document.write(todayFormatted);
                        </script>
                        09:00
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Condition: Dizziness Tab -->
        <div
          id="tab-condition-dizziness"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-dizziness')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-dizziness');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Dizziness
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Dizziness
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-dizziness')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-dizziness')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Created:</span>
                    <span class="text-text-dark-gray dark:text-white">March 15, 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Onset date:</span>
                    <span class="text-text-dark-gray dark:text-white">March 10, 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Abatement:</span>
                    <span class="text-text-dark-gray dark:text-white">Ongoing</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span
                      class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded flex items-center gap-1"
                    >
                      <span class="material-symbols-outlined text-xs">stethoscope</span>
                      Dr. Martinez
                    </span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Patient reports episodes of dizziness occurring 2-3 times per week, typically
                  lasting 5-10 minutes. Episodes are sometimes associated with position changes. No
                  loss of consciousness. Patient denies hearing loss or tinnitus. Symptoms have been
                  stable over the past 3 months.
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Condition: HTN Tab -->
        <div
          id="tab-condition-htn"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-htn')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-htn');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              HTN
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Hypertension (HTN)
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-htn')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-htn')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Created:</span>
                    <span class="text-text-dark-gray dark:text-white">January 5, 2019</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Onset date:</span>
                    <span class="text-text-dark-gray dark:text-white">December 2018</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Abatement:</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Controlled with medication
                    </span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span class="px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 rounded">
                      Patient
                    </span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Essential hypertension diagnosed after consistently elevated readings over 140/90
                  mmHg. Patient started on Lisinopril 10mg daily. Blood pressure has been
                  well-controlled on current medication regimen with recent readings averaging
                  128/82 mmHg. Patient compliant with medication and lifestyle modifications
                  including reduced sodium intake and regular exercise.
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Condition: Chronic Renal Insufficiency Tab -->
        <div
          id="tab-condition-renal"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-renal')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-renal');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Renal Insufficiency
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Chronic Renal Insufficiency
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-renal')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-renal')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Created:</span>
                    <span class="text-text-dark-gray dark:text-white">June 12, 2020</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Onset date:</span>
                    <span class="text-text-dark-gray dark:text-white">May 2020</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Abatement:</span>
                    <span class="text-text-dark-gray dark:text-white">Stage 3a CKD - Stable</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span
                      class="px-2 py-0.5 text-sm font-medium bg-blue-100 text-blue-700 rounded flex items-center gap-1"
                    >
                      <span class="material-symbols-outlined text-xs">stethoscope</span>
                      Dr. Smith
                    </span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Stage 3a chronic kidney disease with eGFR ranging between 45-59 mL/min/1.73m².
                  Secondary to long-standing hypertension and diabetes. Patient monitored with
                  regular renal function tests every 3 months. Current eGFR stable at 52. No
                  proteinuria on recent urinalysis. Patient educated on nephrotoxic medication
                  avoidance and importance of blood pressure and glucose control. Nephrology
                  consultation obtained for co-management.
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Condition: Knee Pain Tab -->
        <div
          id="tab-condition-knee"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-knee')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-knee');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Knee pain
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Knee pain (right)
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-knee')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-knee')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Created:</span>
                    <span class="text-text-dark-gray dark:text-white">September 8, 2023</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Onset date:</span>
                    <span class="text-text-dark-gray dark:text-white">August 2023</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Abatement:</span>
                    <span class="text-text-dark-gray dark:text-white">Improved with PT</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Right knee pain, medial aspect, consistent with osteoarthritis. Patient reports
                  pain with prolonged standing and climbing stairs, rated 5-6/10 at worst. X-ray
                  shows mild joint space narrowing and small osteophytes. Started on NSAIDs as
                  needed and referred to physical therapy. After 8 weeks of PT, patient reports
                  significant improvement with pain now 2-3/10. Continuing home exercise program and
                  weight management.
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Practitioner: Dr. Emily Carter Tab -->
        <div
          id="tab-practitioner-carter"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('practitioner-carter')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              stethoscope
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('practitioner-carter');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Dr. Carter
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Dr. Emily Carter
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('practitioner-carter')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('practitioner-carter')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">person</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Practitioner Information
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Name:</span>
                    <span class="text-text-dark-gray dark:text-white">Dr. Emily Carter, MD</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Specialty:</span>
                    <span class="text-text-dark-gray dark:text-white">Family Medicine</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Role:</span>
                    <span class="text-text-dark-gray dark:text-white">Primary Care Physician</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Clinic:</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Main Family Health Center
                    </span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Phone:</span>
                    <span class="text-text-dark-gray dark:text-white">(555) 123-4567</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Care Relationship
                </h3>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Patient Since:</span>
                    <span class="text-text-dark-gray dark:text-white">January 2015</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Last Visit:</span>
                    <span class="text-text-dark-gray dark:text-white">November 21, 2025</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Next Appointment:</span>
                    <span class="text-text-dark-gray dark:text-white">December 15, 2025</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Conditions Managed
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <span class="text-text-dark-gray dark:text-white">HTN (Hypertension)</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Chronic Renal Insufficiency
                    </span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <span class="text-text-dark-gray dark:text-white">Dizziness</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <!-- Practitioner: Dr. Michael Chen Tab -->
        <div
          id="tab-practitioner-chen"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('practitioner-chen')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              stethoscope
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('practitioner-chen');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Dr. Chen
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Dr. Michael Chen
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('practitioner-chen')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('practitioner-chen')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">person</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Practitioner Information
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Name:</span>
                    <span class="text-text-dark-gray dark:text-white">Dr. Michael Chen, MD</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Specialty:</span>
                    <span class="text-text-dark-gray dark:text-white">Nephrology</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Role:</span>
                    <span class="text-text-dark-gray dark:text-white">Consulting Specialist</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Clinic:</span>
                    <span class="text-text-dark-gray dark:text-white">Regional Kidney Center</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Phone:</span>
                    <span class="text-text-dark-gray dark:text-white">(555) 234-5678</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Care Relationship
                </h3>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Patient Since:</span>
                    <span class="text-text-dark-gray dark:text-white">June 2020</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Last Visit:</span>
                    <span class="text-text-dark-gray dark:text-white">October 5, 2025</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Next Appointment:</span>
                    <span class="text-text-dark-gray dark:text-white">January 10, 2026</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Conditions Managed
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Chronic Renal Insufficiency (Stage 3a CKD)
                    </span>
                  </li>
                </ul>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Quarterly monitoring of kidney function. Patient showing stable renal function
                  with eGFR consistently in the 45-59 range. Emphasizing nephrotoxic medication
                  avoidance and maintaining blood pressure control. Co-managing with primary care
                  for optimal outcomes.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Practitioner: Dr. Sarah Patel Tab -->
        <div
          id="tab-practitioner-patel"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('practitioner-patel')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              stethoscope
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('practitioner-patel');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Dr. Patel
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Dr. Sarah Patel
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('practitioner-patel')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('practitioner-patel')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">person</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Practitioner Information
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Name:</span>
                    <span class="text-text-dark-gray dark:text-white">Dr. Sarah Patel, MD</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Specialty:</span>
                    <span class="text-text-dark-gray dark:text-white">Neurology</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Role:</span>
                    <span class="text-text-dark-gray dark:text-white">Consulting Specialist</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Clinic:</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Neuroscience Medical Group
                    </span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Phone:</span>
                    <span class="text-text-dark-gray dark:text-white">(555) 345-6789</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Care Relationship
                </h3>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Patient Since:</span>
                    <span class="text-text-dark-gray dark:text-white">April 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Last Visit:</span>
                    <span class="text-text-dark-gray dark:text-white">November 8, 2025</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Next Appointment:</span>
                    <span class="text-text-dark-gray dark:text-white">February 8, 2026</span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Conditions Managed
                </h3>
                <ul class="space-y-2 text-base">
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Memory issues (Cognitive Assessment)
                    </span>
                  </li>
                  <li class="flex items-start gap-2">
                    <span class="text-text-light-gray mt-0.5">•</span>
                    <span class="text-text-dark-gray dark:text-white">
                      Dizziness (Neurological evaluation)
                    </span>
                  </li>
                </ul>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Comprehensive cognitive assessment completed. Brain MRI scheduled to rule out
                  structural abnormalities. Patient demonstrates mild cognitive impairment on
                  neuropsychological testing. Follow-up in 3 months to reassess cognitive status and
                  review imaging results. Family education provided on supportive strategies.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Condition: Memory Issues Tab -->
        <div
          id="tab-condition-memory"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('condition-memory')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              health_and_safety
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('condition-memory');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Memory issues
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Memory issues
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('condition-memory')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('condition-memory')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <div class="flex items-center gap-3 mb-3">
                  <span class="material-symbols-outlined text-blue-500">info</span>
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Condition details
                  </h3>
                </div>
                <div class="space-y-2 text-base">
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Created:</span>
                    <span class="text-text-dark-gray dark:text-white">April 22, 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Onset date:</span>
                    <span class="text-text-dark-gray dark:text-white">Early 2024</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Abatement:</span>
                    <span class="text-text-dark-gray dark:text-white">Under evaluation</span>
                  </div>
                  <div class="flex justify-between">
                    <span class="text-text-light-gray">Added by:</span>
                    <span class="px-2 py-0.5 text-xs font-medium bg-gray-100 text-gray-700 rounded">
                      Patient
                    </span>
                  </div>
                </div>
              </div>
              <div class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg">
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Notes
                </h3>
                <p class="text-base text-text-dark-gray dark:text-white">
                  Patient and family report increased forgetfulness over the past 6 months,
                  including difficulty remembering recent conversations and occasional confusion
                  about dates. Mini-Mental State Examination (MMSE) score 26/30, suggesting mild
                  cognitive impairment. Labs including B12, thyroid function, and metabolic panel
                  within normal limits. Brain MRI ordered to rule out structural abnormalities.
                  Referred to neurology for comprehensive cognitive assessment. Patient maintaining
                  independence in daily activities.
                </p>
              </div>
            </div>
          </div>
        </div>
        <!-- Encounter 2 Tab -->
        <div
          id="tab-encounter-2"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('encounter-2')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              event
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('encounter-2');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Encounter 11/14
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Encounter · 2025-11-14
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('encounter-2')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('encounter-2')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20 sm:p-6 sm:pt-22 md:p-8 md:pt-24 space-y-4">
              <!-- Encounter Header -->
              <encounter-header date="2025-11-14" patient-name="H, Jane"></encounter-header>

              <!-- Encounter Details -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between mb-4">
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">
                    Encounter Details
                  </h3>
                  <status-chip variant="archived" value="Archived" editable="true"></status-chip>
                </div>
                <div class="grid grid-cols-2 gap-4 text-sm">
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Created</span>
                    <span class="text-text-dark-gray dark:text-white font-medium">
                      2025-11-14 12:11
                    </span>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Updated</span>
                    <span class="text-text-dark-gray dark:text-white font-medium">
                      2025-11-14 12:11
                    </span>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Intake</span>
                    <status-chip variant="empty" value="--" editable="true"></status-chip>
                  </div>

                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Ready for review</span>
                    <status-chip variant="neutral" value="Not ready" editable="true"></status-chip>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Appointment Date</span>
                    <span class="text-text-dark-gray dark:text-white font-medium">2025-12-10</span>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">Appointment Type</span>
                    <status-chip variant="neutral" value="Follow-up" editable="true"></status-chip>
                  </div>
                  <div>
                    <span class="text-gray-600 block mb-2 font-semibold">View</span>
                    <status-chip variant="split-view" value="Split"></status-chip>
                  </div>
                </div>
              </div>

              <!-- Summaries -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Summaries
                </h3>
                <div
                  class="border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-card-dark"
                >
                  <table class="w-full text-sm">
                    <thead class="bg-gray-100 dark:bg-gray-800">
                      <tr>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Summary Name
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Type
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Created
                        </th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                      <tr
                        class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
                        onclick="toggleTab('summary-intake')"
                      >
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-purple-600 text-lg">
                              summarize
                            </span>
                            <span class="text-blue-600 hover:underline font-medium">
                              Summary: Patient Intake Form
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3 text-text-dark-gray dark:text-white">Form Summary</td>
                        <td class="px-4 py-3 text-text-light-gray">2025-11-14</td>
                      </tr>
                      <tr
                        class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
                        onclick="toggleTab('summary-visit')"
                      >
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-purple-600 text-lg">
                              summarize
                            </span>
                            <span class="text-blue-600 hover:underline font-medium">
                              Summary: Follow up form
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3 text-text-dark-gray dark:text-white">Visit Summary</td>
                        <td class="px-4 py-3 text-text-light-gray">2025-11-14</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Forms -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Forms
                </h3>
                <div
                  class="border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-card-dark"
                >
                  <table class="w-full text-sm">
                    <thead class="bg-gray-100 dark:bg-gray-800">
                      <tr>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Form Name
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Status
                        </th>
                        <th
                          class="text-left px-4 py-2 font-semibold text-text-dark-gray dark:text-white"
                        >
                          Created
                        </th>
                      </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                      <tr
                        class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
                        onclick="toggleTab('intake-form')"
                      >
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-blue-600 text-lg">
                              description
                            </span>
                            <span class="text-blue-600 hover:underline font-medium">
                              Form "Intake Form"
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3">
                          <span
                            class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded"
                          >
                            Completed
                          </span>
                        </td>
                        <td class="px-4 py-3 text-text-light-gray">2025-11-21</td>
                      </tr>
                      <tr
                        class="hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer"
                        onclick="toggleTab('intake-form')"
                      >
                        <td class="px-4 py-3">
                          <div class="flex items-center gap-2">
                            <span class="material-symbols-outlined text-blue-600 text-lg">
                              description
                            </span>
                            <span class="text-blue-600 hover:underline font-medium">
                              Form "Intake Form"
                            </span>
                          </div>
                        </td>
                        <td class="px-4 py-3">
                          <span
                            class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded"
                          >
                            Completed
                          </span>
                        </td>
                        <td class="px-4 py-3 text-text-light-gray">2025-11-28</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <!-- Notes -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white">Notes</h3>
                  <button
                    class="px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 border border-blue-600 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-1"
                  >
                    <span class="material-symbols-outlined text-lg">add</span>
                    Add Note
                  </button>
                </div>
                <div class="space-y-3">
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-sm"
                      >
                        person
                      </span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Dr. Smith
                        </p>
                        <span
                          class="px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-800 rounded"
                        >
                          Private
                        </span>
                      </div>
                      <p class="text-base text-text-dark-gray dark:text-white mb-2">
                        Patient reports improvement in symptoms. Continue current treatment plan.
                        Follow-up recommended in 2 weeks.
                      </p>
                      <p class="text-xs text-text-light-gray">2025-11-21 15:45</p>
                    </div>
                  </div>
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-purple-600 dark:text-purple-400 text-sm"
                      >
                        patient_list
                      </span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Maria Johnson (Patient)
                        </p>
                        <span
                          class="px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded"
                        >
                          Public
                        </span>
                      </div>
                      <p class="text-base text-text-dark-gray dark:text-white mb-2">
                        I forgot to mention during my visit that I've also been experiencing
                        occasional headaches in the morning. They usually go away after breakfast.
                      </p>
                      <p class="text-xs text-text-light-gray">2025-11-21 14:30</p>
                    </div>
                  </div>
                  <div class="flex gap-3">
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-sm"
                      >
                        person
                      </span>
                    </div>
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <p class="text-base font-medium text-text-dark-gray dark:text-white">
                          Dr. Smith
                        </p>
                        <span
                          class="px-2 py-0.5 text-xs font-medium bg-green-100 text-green-800 rounded"
                        >
                          Public
                        </span>
                      </div>
                      <p class="text-base text-text-dark-gray dark:text-white mb-2">
                        Appointment scheduled for comprehensive exam. Please arrive 15 minutes early
                        to complete intake paperwork.
                      </p>
                      <p class="text-xs text-text-light-gray">2025-11-21 09:20</p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Activity -->
              <div
                class="p-4 bg-neutral-bg dark:bg-background-dark rounded-lg border border-gray-200 dark:border-gray-700"
              >
                <h3 class="text-lg font-semibold text-text-dark-gray dark:text-white mb-3">
                  Activity
                </h3>
                <div class="space-y-3">
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-blue-600 dark:text-blue-400 text-sm"
                      >
                        check_circle
                      </span>
                    </div>
                    <div class="flex-1">
                      <p class="text-base font-medium text-text-dark-gray dark:text-white">
                        Form completed
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">
                        Intake Form submitted by patient
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">2025-11-14 14:30</p>
                    </div>
                  </div>
                  <div
                    class="flex gap-3 pb-3 border-b border-gray-200 dark:border-gray-700 last:border-0"
                  >
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-purple-100 dark:bg-purple-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-purple-600 dark:text-purple-400 text-sm"
                      >
                        send
                      </span>
                    </div>
                    <div class="flex-1">
                      <p class="text-base font-medium text-text-dark-gray dark:text-white">
                        Form sent
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">
                        Intake Form sent to patient by Dr. Smith
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">2025-11-14 09:15</p>
                    </div>
                  </div>
                  <div class="flex gap-3">
                    <div
                      class="flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center"
                    >
                      <span
                        class="material-symbols-outlined text-green-600 dark:text-green-400 text-sm"
                      >
                        add_circle
                      </span>
                    </div>
                    <div class="flex-1">
                      <p class="text-base font-medium text-text-dark-gray dark:text-white">
                        Encounter created
                      </p>
                      <p class="text-xs text-text-light-gray mt-1">Created by Dr. Smith</p>
                      <p class="text-xs text-text-light-gray mt-1">2025-11-14 09:00</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Document: Labs - 2025-12-01 Tab -->
        <div
          id="tab-document-lab"
          class="vertical-tab collapsed bg-card-light dark:bg-card-dark border-r border-gray-200 dark:border-gray-700 hidden flex flex-col"
        >
          <button
            onclick="toggleTab('document-lab')"
            class="w-full h-full flex flex-col items-center justify-start p-3 hover:bg-neutral-bg dark:hover:bg-background-dark transition-colors collapsed-only"
          >
            <span
              class="material-symbols-outlined text-xl text-text-dark-gray dark:text-neutral-bg mb-3 tab-icon"
            >
              folder
            </span>
            <span
              onclick="
                event.stopPropagation();
                closeTab('document-lab');
              "
              class="material-symbols-outlined text-xl text-text-light-gray mb-3 close-on-hover cursor-pointer"
              title="Close tab"
            >
              close
            </span>
            <span class="tab-label text-sm font-semibold text-text-dark-gray dark:text-neutral-bg">
              Labs - 2025-12-01
            </span>
          </button>
          <div class="tab-content">
            <div class="sticky top-16 bg-card-light dark:bg-card-dark z-10 flex-shrink-0 h-16">
              <div
                class="border-b border-gray-200 dark:border-gray-700 px-4 h-full flex items-center"
              >
                <div class="flex items-center justify-between w-full">
                  <h1 class="text-xl font-bold text-text-dark-gray dark:text-neutral-bg truncate">
                    Labs - 2025-12-01
                  </h1>
                  <div class="flex items-center gap-1 flex-shrink-0">
                    <button
                      onclick="collapseTab('document-lab')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Collapse tab"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="text-text-light-gray"
                      >
                        <rect width="18" height="18" x="3" y="3" rx="2" />
                        <path d="M9 3v18" />
                        <path d="m16 15-3-3 3-3" />
                      </svg>
                    </button>
                    <button
                      onclick="closeTab('document-lab')"
                      class="p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"
                      title="Close tab"
                    >
                      <span class="material-symbols-outlined text-xl text-text-light-gray">
                        close
                      </span>
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="tab-overflow p-4 pt-20">
              <div class="bg-white dark:bg-card-dark rounded-lg shadow-sm overflow-hidden">
                <div class="p-4">
                  <img
                    src="../images/results-sample.png"
                    alt="Labs - 2025-12-01 Table"
                    class="w-full h-auto cursor-pointer"
                    onclick="openImageModal(this.src)"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script
      data-cfasync="false"
      src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"
    ></script>
    <script>
      // Track which tabs are currently open and their state
      const openTabs = new Set();
      const tabStates = {}; // 'expanded', 'collapsed', or 'closed'
      let activeTabId = null; // Track the currently active/focused tab

      // Open Overview tab by default, or a specific tab from URL params
      window.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const tabParam = urlParams.get('tab');

        // If a tab is specified in the URL, open that tab, otherwise open overview
        if (tabParam) {
          openTab(tabParam);
        } else {
          openTab('overview');
        }
      });

      function showDirectory(directoryId) {
        // Hide root menu
        document.getElementById('root-menu').classList.add('hidden');

        // Hide all directories
        document.getElementById('health-records-directory').classList.add('hidden');
        document.getElementById('conditions-directory').classList.add('hidden');
        document.getElementById('practitioners-directory').classList.add('hidden');
        document.getElementById('immunizations-directory').classList.add('hidden');
        document.getElementById('encounters-directory').classList.add('hidden');
        document.getElementById('forms-directory').classList.add('hidden');
        document.getElementById('summaries-directory').classList.add('hidden');
        document.getElementById('documents-directory').classList.add('hidden');

        // Show selected directory
        document.getElementById(directoryId + '-directory').classList.remove('hidden');
      }

      function showRootMenu() {
        // Hide all directories
        document.getElementById('health-records-directory').classList.add('hidden');
        document.getElementById('conditions-directory').classList.add('hidden');
        document.getElementById('practitioners-directory').classList.add('hidden');
        document.getElementById('immunizations-directory').classList.add('hidden');
        document.getElementById('encounters-directory').classList.add('hidden');
        document.getElementById('forms-directory').classList.add('hidden');
        document.getElementById('summaries-directory').classList.add('hidden');
        document.getElementById('documents-directory').classList.add('hidden');

        // Show root menu
        document.getElementById('root-menu').classList.remove('hidden');
      }

      function openTab(tabId) {
        const tab = document.getElementById(`tab-${tabId}`);
        const tabsContainer = document.getElementById('tabs-container');
        const label = tab.querySelector('.tab-label');
        const content = tab.querySelector('.tab-content');

        openTabs.add(tabId);
        tabStates[tabId] = 'expanded';

        // Remove active state from all tabs
        document.querySelectorAll('.vertical-tab').forEach((t) => {
          t.classList.remove('active-tab');
        });

        // Set this as the active tab
        activeTabId = tabId;
        tab.classList.add('active-tab');

        // Move tab to the beginning of the container (leftmost position)
        tabsContainer.insertBefore(tab, tabsContainer.firstChild);

        tab.classList.remove('hidden', 'collapsed');
        tab.classList.add('expanded');
        label.classList.add('expanded');

        // Fade in content after expansion starts
        setTimeout(() => {
          content.classList.add('visible');
        }, 150);

        // Scroll the tab into view
        setTimeout(() => {
          tab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });
        }, 200);
      }

      function setActiveTab(tabId) {
        const tab = document.getElementById(`tab-${tabId}`);

        // If tab is not open at all, open it
        if (!openTabs.has(tabId)) {
          openTab(tabId);
          return;
        }

        // Remove active state from all tabs
        document.querySelectorAll('.vertical-tab').forEach((t) => {
          t.classList.remove('active-tab');
        });

        // Set this as the active tab
        activeTabId = tabId;
        tab.classList.add('active-tab');

        // Scroll into view
        tab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });
      }

      function toggleTab(tabId) {
        const tab = document.getElementById(`tab-${tabId}`);
        const label = tab.querySelector('.tab-label');
        const content = tab.querySelector('.tab-content');

        // If tab is not in openTabs at all, open it
        if (!openTabs.has(tabId)) {
          openTab(tabId);
          return;
        }

        // If tab is collapsed, expand it and scroll into view
        if (tabStates[tabId] === 'collapsed') {
          tabStates[tabId] = 'expanded';

          // Remove active state from all tabs
          document.querySelectorAll('.vertical-tab').forEach((t) => {
            t.classList.remove('active-tab');
          });

          // Set this as the active tab
          activeTabId = tabId;
          tab.classList.add('active-tab');

          tab.classList.remove('collapsed');
          tab.classList.add('expanded');
          label.classList.add('expanded');

          // Fade in content
          setTimeout(() => {
            content.classList.add('visible');
          }, 150);

          // Scroll into view
          setTimeout(() => {
            tab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });
          }, 200);
        } else if (tabStates[tabId] === 'expanded') {
          // Tab is already expanded - just scroll into view and set as active
          // Remove active state from all tabs
          document.querySelectorAll('.vertical-tab').forEach((t) => {
            t.classList.remove('active-tab');
          });

          // Set this as the active tab
          activeTabId = tabId;
          tab.classList.add('active-tab');

          // Scroll into view
          tab.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });
        }
      }

      function collapseTab(tabId) {
        const tab = document.getElementById(`tab-${tabId}`);
        const label = tab.querySelector('.tab-label');
        const content = tab.querySelector('.tab-content');

        tabStates[tabId] = 'collapsed';

        // Keep active state even when collapsed
        // (don't remove active-tab class)

        // Collapse the tab but keep it in openTabs
        tab.classList.remove('expanded');
        tab.classList.add('collapsed');
        label.classList.remove('expanded');

        // Fade out content
        content.classList.remove('visible');
      }

      function closeTab(tabId) {
        const tab = document.getElementById(`tab-${tabId}`);
        const label = tab.querySelector('.tab-label');
        const content = tab.querySelector('.tab-content');

        // Remove from open tabs
        openTabs.delete(tabId);
        tabStates[tabId] = 'closed';

        // Clear active state if this was the active tab
        if (activeTabId === tabId) {
          activeTabId = null;
        }
        tab.classList.remove('active-tab');

        // Collapse first
        tab.classList.remove('expanded');
        tab.classList.add('collapsed');
        label.classList.remove('expanded');
        content.classList.remove('visible');

        // Then hide completely after animation
        setTimeout(() => {
          if (!openTabs.has(tabId)) {
            tab.classList.add('hidden');
          }
        }, 300);
      }

      function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('collapsed');
      }

      function toggleDropdown() {
        const dropdown = document.getElementById('userDropdown');
        dropdown.classList.toggle('show');
      }

      function toggleAddDropdown() {
        const dropdown = document.getElementById('add-dropdown');
        dropdown.classList.toggle('hidden');
      }

      function togglePatientMenu() {
        const dropdown = document.getElementById('patient-menu-dropdown');
        dropdown.classList.toggle('hidden');
      }

      function handleSendForm() {
        const sendFormModal = document.getElementById('sendFormModal');
        if (sendFormModal) {
          sendFormModal.open({
            showEncounterSelection: true,
            patientName: 'H, Jane',
          });
        }
      }

      function handleEditPatient() {
        console.log('Edit Patient clicked');
        // TODO: Implement edit patient flow
        alert('Edit Patient coming soon!');
      }

      function handleRemovePatient() {
        console.log('Remove Patient clicked');
        // TODO: Implement remove patient confirmation
        if (confirm('Are you sure you want to remove this patient?')) {
          alert('Remove Patient functionality coming soon!');
        }
      }

      function handleAddHealthRecord() {
        console.log('Add Health Record clicked');
        // TODO: Implement health record creation flow
        alert('Health Record creation coming soon!');
      }

      function handleAddNote() {
        console.log('Add Note clicked');
        // TODO: Implement note creation flow
        alert('Note creation coming soon!');
      }

      function handleAddDocument() {
        console.log('Add Document clicked');
        // TODO: Implement document upload flow
        alert('Document upload coming soon!');
      }

      function handleAddEncounter() {
        console.log('Add Encounter clicked');
        // TODO: Implement encounter creation flow
        alert('New Encounter creation coming soon!');
      }

      // Encounter header event listeners
      document.addEventListener('send-form', function (event) {
        const sendFormModal = document.getElementById('sendFormModal');
        if (sendFormModal) {
          sendFormModal.open({
            showEncounterSelection: false,
            patientName: event.detail.patientName || 'H, Jane',
          });
        }
      });

      document.addEventListener('view-patient', function () {
        window.location.href = '../index.html';
      });

      document.addEventListener('archive-encounter', function () {
        console.log('Archive encounter');
        alert('Archive encounter functionality coming soon!');
      });

      document.addEventListener('click', function (event) {
        const dropdown = document.getElementById('userDropdown');
        const avatarBtn = document.getElementById('userAvatarBtn');

        if (!dropdown.contains(event.target) && !avatarBtn.contains(event.target)) {
          dropdown.classList.remove('show');
        }

        // Close add dropdown when clicking outside
        const addDropdown = document.getElementById('add-dropdown');
        const addButton = event.target.closest('button[onclick*="toggleAddDropdown"]');

        if (addDropdown && !addDropdown.contains(event.target) && !addButton) {
          addDropdown.classList.add('hidden');
        }

        // Close patient menu dropdown when clicking outside
        const patientMenuDropdown = document.getElementById('patient-menu-dropdown');
        const patientMenuBtn = event.target.closest('button[onclick*="togglePatientMenu"]');

        if (patientMenuDropdown && !patientMenuDropdown.contains(event.target) && !patientMenuBtn) {
          patientMenuDropdown.classList.add('hidden');
        }
      });

      // Image modal functions
      function openImageModal(imageSrc) {
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        modalImage.src = imageSrc;
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
      }

      function closeImageModal(event) {
        // Close if clicking on overlay or close button
        if (event.target.id === 'imageModal' || event.target.closest('button')) {
          const modal = document.getElementById('imageModal');
          modal.classList.remove('active');
          document.body.style.overflow = '';
        }
      }

      // Close modal with ESC key
      document.addEventListener('keydown', function (event) {
        if (event.key === 'Escape') {
          const modal = document.getElementById('imageModal');
          if (modal.classList.contains('active')) {
            modal.classList.remove('active');
            document.body.style.overflow = '';
          }
        }
      });
    </script>

    <!-- Send Form Modal -->
    <send-form-modal id="sendFormModal"></send-form-modal>

    <!-- Image Modal -->
    <div id="imageModal" class="modal-overlay" onclick="closeImageModal(event)">
      <div class="modal image-modal">
        <div class="modal-header">
          <h2 class="text-xl font-semibold">Labs - 2025-12-01</h2>
          <button onclick="closeImageModal(event)" class="text-gray-500 hover:text-gray-700">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <img id="modalImage" src="" alt="Labs - 2025-12-01" class="w-full h-auto" />
        </div>
      </div>
    </div>

    <style>
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 9999;
      }

      .modal-overlay.active {
        display: flex;
      }

      .modal.image-modal {
        background: white;
        border-radius: 12px;
        box-shadow:
          0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
        max-width: 90vw;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.5rem;
        border-bottom: 1px solid #e5e7eb;
      }

      .modal-body {
        padding: 1.5rem;
        overflow: auto;
        flex: 1;
      }

      .modal-body img {
        display: block;
        margin: 0 auto;
      }
    </style>
  </body>
</html>
